<!DOCTYPE html>
<html>
  
  <head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/3.16.1/math.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript" language="javascript" src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script type="text/javascript" language="javascript" src="https://cdn.datatables.net/1.10.13/js/jquery.dataTables.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.13/css/jquery.dataTables.min.css">
    <link rel="stylesheet" type="text/css" href="leaflet/leaflet.css" />
    <script type="text/javascript" src="leaflet/leaflet.js"></script>
  </head> 
  
<body>

<p>Coordenadas?</p>

<button onclick="getLocation()">Coordenadas</button>

<p id="demo"></p>

<div id ="mapas" style="height: 90vh; width: 90vw">  
  
<script>
var x = document.getElementById("demo");
var ny=0;
var nx =0;
function getLocation() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(showPosition);
  } else { 
    x.innerHTML = "Geolocation is not supported by this browser.";
  }
}
function showPosition(position) {
  x.innerHTML = "Latitude: " + position.coords.latitude + 
  "<br>Longitude: " + position.coords.longitude;
  nx=position.coords.longitude;
  ny=position.coords.latitude
  goCoordenada();
}
  
  
function goCoordenada(){
	var salida = "nada";
  var zoomp = 18;
	
  mapas.setView(new L.LatLng(ny, nx),zoomp );	
  //mapas.flyTo(new L.LatLng(ny, nx), zoomp);
  //mapas.panTo(L.LatLng(ny, nx));
  visibleEast = mapas.getBounds().getEast()
  visibleWest = mapas.getBounds().getWest()
  visibleNorth = mapas.getBounds().getNorth()
  visibleSouth = mapas.getBounds().getSouth()
  if(mapas.hasLayer(circle1)){
         mapas.removeLayer(circle1);
    };
   var circle1 =L.circle([ny,nx], {
    color: 'blue',
    fillColor: '#2222ff',
    fillOpacity: 0.05,
    radius: 10,
    weight: 1
});
   circle1.addTo(mapas);
  if(mapas.hasLayer(circle2)){
         mapas.removeLayer(circle2);
    };
   var circle2 = L.circle([ny,nx], {
    color: 'green',
    fillColor: '#f03',
    fillOpacity: 0.3,
    radius: 3,
    weight: 2
});
   circle2.addTo(mapas);	
};  

function initmapas(){

    mapas = new L.map('mapas',{zoomSnap: 0.125,zoomControl: true }).setView(new L.LatLng(19.353890, -99.138817),18);
    mapas.scrollWheelZoom.disable(); // sin mouse o pad wheel zoom
    //mapas.dragging.disable(); // sin drah event
    mapas.touchZoom.disable(); 
    mapas.doubleClickZoom.disable();
    mapas.scrollWheelZoom.disable(); // sin mouse o pad wheel zoom

	var orl= L.tileLayer('http://korona.geog.uni-heidelberg.de/tiles/roads/x={x}&y={y}&z={z}', {
	maxZoom: 20//,
		//attribution: 'Imagery from <a href="http://giscience.uni-hd.de/">GIScience Research Group @ University of Heidelberg</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
	});

	var osmUrl='http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
	var osmAttrib='Map data Â© <a href="http://openstreetmap.org">OpenStreetMap</a> contributors';
	var osm = new L.TileLayer(osmUrl, {minZoom: 1, maxZoom: 20, attribution: osmAttrib});
	OpenStreetMap_France = L.tileLayer('https://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png', {
		maxZoom: 20,
		attribution: '&copy; Openstreetmap France | &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
	});

	mapas.addLayer(OpenStreetMap_France);
	//L.control.zoom().addTo(mapMunicipioREG)
}	
	
	
	setInterval(function(){ getLocation(); }, 3000);
  
</script>
<script>
	initmapas()
</script>	

<script type="text/javascript">
function parseQueryString(input){
    var out={}, decode=decodeURIComponent, s=input||location.search||"",
        kv=("?"===s.charAt(0)?s.slice(1):s).replace(/\+/g," ").split(/[&;]/g),
        idx=-1,key,value;
    while(++idx<kv.length){
        if (kv[idx]==="") continue;
        value=kv[idx].split("=");
        key=decode(value.shift());
        (out[key]||(out[key]=[])).push(decode(value.join("=")));
    }
    return out;
}
     var _url =document.URL;	
     alert(_url);
     var queryData = parseQueryString(_url.toString());
     var p = queryData['a'];
     alert(p);
     var q = queryData['b'];
     alert(q);

var x = document.URL;	
	     alert(x);
</script>
	
	
</body>
</html>
